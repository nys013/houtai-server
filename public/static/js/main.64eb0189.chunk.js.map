{"version":3,"sources":["api/ajax.jsx","api/index.js","utils/storageUtils.js","redux/actions.js","redux/action-types.js","pages/login/login.jsx","utils/dateUtils.js","config/menuConfig.js","components/link-button/index.js","components/header/header.jsx","components/left-nav/left-nav.jsx","pages/home/home.jsx","pages/category/add-form.js","pages/category/update-form.js","pages/category/category.jsx","pages/product/home.jsx","utils/constants.js","pages/product/picture-wall.jsx","pages/product/rich-text-editor.jsx","pages/product/add-update.jsx","pages/product/detail.jsx","pages/product/product.jsx","pages/role/add-form.js","pages/role/auth-form.js","pages/role/role.jsx","pages/user/user-form.js","pages/user/user.jsx","pages/charts/bar.jsx","pages/charts/line.jsx","pages/charts/pie.jsx","pages/not-found/not-found.jsx","pages/main/main.jsx","app.js","redux/reducer.js","redux/store.js","index.js","assets/imgs/logo.png"],"names":["ajax","url","data","type","Promise","resolve","reject","axios","get","params","post","then","response","catch","error","message","reqLogin","username","password","BASE","reqWeather","city","jsonp","err","results","weather_data","dayPictureUrl","weather","status","reqCategorys","parentId","reqAddCategory","categoryName","reqProducts","pageNum","pageSize","reqSearchProducts","searchKey","searchType","reqCategory","categoryId","reqUpdateStatus","productId","reqDeletePic","name","reqAddOrUpdateProduct","product","_id","reqAddRole","roleName","reqUpdateRole","role","user","store","set","remove","setHeaderTitle","headerTitle","logout","storage","Login","handleSubmit","event","window","preventDefault","props","form","validateFields","values","a","console","log","login","this","validatorPwd","rule","value","callback","length","test","to","className","src","logo","alt","msg","onSubmit","Item","getFieldDecorator","rules","required","max","min","pattern","initialValue","prefix","style","color","placeholder","validator","htmlType","Component","WrapLogin","create","connect","state","dispatch","result","formateDate","time","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","menuList","title","key","icon","isPublic","children","LinkButton","confirm","Header","currentTime","getCurrentTime","intervalId","setInterval","now","setState","getWeather","okText","cancelText","onOk","clearInterval","onClick","withRouter","SubMenu","LeftNav","setAuth","item","menus","indexOf","find","child","getMenuNodes_reduce","reduce","pretotal","path","location","pathname","cItem","openKey","push","MenuNodes","mode","theme","selectedKeys","defaultOpenKeys","Home","fontSize","fontWeight","textAlign","Option","AddForm","setForm","categorys","map","c","propsTypes","PropTypes","array","isRequired","string","func","UpdateForm","Category","loading","category","secCategory","parentName","visible","getCategorts","getSecCategorys","getFirCategory","showAdd","addCategory","resetFields","showUpdate","updateCategory","getFieldValue","handleCancel","columns","dataIndex","render","width","marginRight","extra","dataSource","rowKey","bordered","pagination","defaultPageSize","showQuickJumper","onCancel","products","total","getProducts","list","updateStatus","success","addProduct","history","price","btnText","statusText","defaultValue","onChange","margin","target","current","getBase64","file","reader","FileReader","readAsDataURL","onload","onerror","PicturesWall","previewVisible","handlePreview","preview","originFileObj","previewImage","handleChange","fileList","getPictures","imgs","img","index","uid","uploadButton","accept","action","listType","onPreview","footer","React","RichTextEditor","uploadImageCallBack","xhr","XMLHttpRequest","open","FormData","append","send","addEventListener","JSON","parse","responseText","getEditor","draftToHtml","convertToRaw","editorState","getCurrentContent","onEditorStateChange","html","detail","contentBlock","htmlToDraft","contentState","ContentState","createFromBlockArray","contentBlocks","EditorState","createWithContent","createEmpty","wrapperClassName","editorStyle","border","minHeight","padding","toolbar","image","uploadCallback","present","mandatory","TextArea","AddUpdate","options","pw","editor","desc","categoryIds","pCategoryId","isUpdate","goBack","validatorPrice","getCategorys","firCategorys","label","isLeaf","secCategorys","cOptions","option","loadData","selectedOptions","targetOption","createRef","labelCol","xs","span","sm","wrapperCol","autosize","minRows","maxRows","addonAfter","ref","Detail","cName1","cName2","all","dangerouslySetInnerHTML","__html","Product","component","exact","TreeNode","AuthForm","getTreeNodes","onCheck","checkedKeys","info","getMenus","treeNodes","prevProps","disabled","defaultExpandAll","checkable","PureComponent","Role","roles","isShowAdd","isShowAuth","initColumns","create_time","getRoleList","onRow","addRole","setRole","auth_time","auth_name","role_id","rowSelection","selectedRowKeys","onSelect","UserForm","phone","email","object","User","users","rolesName","deleteUser","getUsers","getRolesName","preTotal","addOrUpdateUser","okType","userId","Bar","sales","stores","update","setOption","text","tooltip","legend","xAxis","yAxis","series","Line","Pie","backgroundColor","left","top","textStyle","trigger","formatter","visualMap","show","inRange","colorLightness","radius","center","sort","b","roseType","labelLine","lineStyle","smooth","length2","itemStyle","shadowBlur","shadowColor","animationType","animationEasing","animationDelay","idx","Math","random","NotFound","goHome","replace","Footer","Sider","Content","Main","from","App","inituser","combineReducers","createStore","reducer","composeWithDevTools","applyMiddleware","thunk","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.64eb0189.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nimport {message} from 'antd'\r\n\r\nexport default function ajax (url,data={},type=\"GET\"){\r\n  return new Promise((resolve,reject) => {\r\n    let promise\r\n    if(type===\"GET\"){\r\n      promise =  axios.get(url,{\r\n        params:data\r\n      })\r\n    }else{\r\n      promise = axios.post(url,data)\r\n    }\r\n    promise.then(response =>{\r\n      resolve(response.data)\r\n    }).catch(error => {\r\n      message.error('请求发生错误'+error)\r\n    })\r\n  })\r\n\r\n}","import ajax from './ajax.jsx'\r\nimport {message} from 'antd'\r\nimport jsonp from 'jsonp'\r\n\r\nconst BASE = '/api'\r\n//获取登录数据\r\nexport const reqLogin = (username,password) => ajax(BASE +\"/login\",{username,password},\"POST\")\r\n//添加、更新用户\r\nexport const reqAddOrUpdateUSer = (user) => ajax(BASE +\"/manage/user/\"+ (user._id ? \"update\" : \"add\"),user,\"POST\")\r\n//获取天气\r\nexport const reqWeather = (city)=>{\r\n  return new Promise((resolve , reject) => {\r\n    const url = `http://api.map.baidu.com/telematics/v3/weather?location=${city}&output=json&ak=3p49MVra6urFRGOT9s8UBWr2`\r\n    jsonp(url,{},(err,data)=>{\r\n      if(!err){\r\n        const {dayPictureUrl,weather} = data.results[0].weather_data[0]\r\n        if(data.status==='success'){\r\n          resolve({dayPictureUrl,weather})\r\n        }else{\r\n          message.error('获取天气信息失败')\r\n        }\r\n      }\r\n\r\n    })\r\n  })\r\n}\r\n//获取1级/2级分类\r\nexport const reqCategorys = (parentId) => ajax(BASE +'/manage/category/list',{parentId})\r\n//添加分类\r\nexport const reqAddCategory = (categoryName,parentId) => ajax(BASE +'/manage/category/add',{categoryName,parentId},\"POST\")\r\n//更新分类\r\nexport const reqUpdateCategory = ({categoryName,categoryId}) => ajax(BASE +'/manage/category/update',{categoryName,categoryId},\"POST\")\r\n\r\n//获取商品分页列表\r\nexport const reqProducts = (pageNum,pageSize) => ajax(BASE +'/manage/product/list',{pageNum,pageSize})\r\n\r\n//搜索商品\r\nexport const reqSearchProducts = ({pageNum,pageSize,searchKey,searchType}) => ajax(BASE +'manage/product/search',{\r\n  pageNum,\r\n  pageSize,\r\n  [searchType]:searchKey\r\n})\r\n\r\n//根据分类ID获取分类\r\nexport const reqCategory = (categoryId) => ajax(BASE +'/manage/category/info',{categoryId})\r\n//对商品进行上架/下架处理\r\nexport const reqUpdateStatus = (productId , status ) => ajax(BASE +'/manage/product/updateStatus',{productId , status},\"POST\")\r\n\r\n//删除图片\r\nexport const reqDeletePic = (name) => ajax(BASE +'/manage/img/delete',{name},'POST')\r\n\r\n//添加/更新商品\r\nexport const reqAddOrUpdateProduct = (product) => ajax(BASE +'/manage/product/' + (product._id? 'update' : 'add') ,product ,'POST')\r\n\r\n//获取角色列表\r\nexport const reqRoleList = () => ajax(BASE +'/manage/role/list')\r\n//添加角色\r\nexport const reqAddRole = (roleName) => ajax(BASE +'/manage/role/add',{roleName},'POST')\r\n//更新角色\r\nexport const reqUpdateRole = (role) => ajax(BASE +'/manage/role/update',role,'POST')\r\n\r\n//获取用户列表\r\nexport const reqUserList = ()=> ajax(BASE +'/manage/user/list')\r\n\r\nexport const reqDeleteUser = (userId) => ajax(BASE +'/manage/user/delete' , {userId} , \"POST\")","import store from 'store'\r\n\r\nconst USER_KEY = 'user_key'\r\n\r\nexport default {\r\n  //保存\r\n  saveUser (user) {store.set(USER_KEY,user)},\r\n  //获取\r\n  getUser () {return store.get(USER_KEY) || {}},\r\n  //删除\r\n  removeUser () {return store.remove(USER_KEY)}\r\n}","import {SET_HEADER_TITLE , RECEIVE_USER , SEND_ERROR_MSG , RESET_USER} from './action-types.js'\r\nimport {reqLogin} from '../api/index.js'\r\nimport storage from '../utils/storageUtils.js'\r\nimport {message} from 'antd'\r\n\r\nexport const setHeaderTitle = (headerTitle) => ({type:SET_HEADER_TITLE,data:headerTitle})\r\n\r\nexport const receiveUser = (user) => ({type:RECEIVE_USER , user})\r\n\r\nexport const errorMsg = (msg) => ({type:SEND_ERROR_MSG , msg})\r\n\r\nexport const logout = () => {\r\n  //清除浏览器localstorage中储存的数据\r\n  storage.removeUser()\r\n  //返回action，让reducer去处理数据\r\n  return {type:RESET_USER }\r\n}\r\n\r\n/*登录的异步action*/\r\nexport const login = (username,password) => {\r\n  return async dispatch => {\r\n    const result = await reqLogin(username,password)\r\n    if(result.status===0){\r\n      //存储user\r\n      storage.saveUser(result.data)\r\n      //在事件的回调函数里面，就用history的方法进行跳转，在render里面就用路由的重定向跳转\r\n\r\n      dispatch(receiveUser(result.data))\r\n    }else{\r\n      /*1.直接显示错误信息*/\r\n      //message.error(result.msg)\r\n      /*2.分发错误action*/\r\n      dispatch(errorMsg(result.msg))\r\n\r\n    }\r\n  }\r\n}\r\n","\r\nexport const SET_HEADER_TITLE = 'set_header_title'\r\n\r\nexport const RECEIVE_USER = 'receive_user'\r\n\r\nexport const SEND_ERROR_MSG = 'send_error_msg'\r\n\r\nexport const RESET_USER = 'reset_user'","import React, {Component} from 'react'\nimport { Form, Icon, Input, Button ,message} from 'antd';\nimport {Redirect} from 'react-router-dom'\nimport {connect} from 'react-redux'\n\nimport './login.less'\nimport logo from './../../assets/imgs/logo.png'\nimport {reqLogin} from '../../api'\nimport storage from '../../utils/storageUtils.js'\nimport {login} from '../../redux/actions.js'\n\nclass Login extends Component {\n\n  handleSubmit = (event)=>{\n    event = event || window.event\n    event.preventDefault()\n    //统一验证\n    this.props.form.validateFields(async (err, values) => {\n      if (!err) {\n        const {username,password} = values\n        //不能这么写，因为这是个异步执行的，要么分开取，要么就要在ajax返回的时候就直接返回的data\n        //const result = await reqLogin(username,password).data\n        /*const result = await reqLogin(username,password)\n        if(result.status===0){\n          //存储user\n          storage.saveUser(result.data)\n          //在事件的回调函数里面，就用history的方法进行跳转，在render里面就用路由的重定向跳转\n          this.props.history.replace('/home')\n          message.success(\"登陆成功\")\n        }else{\n          message.error(result.msg)\n        }*/\n        this.props.login(username,password)\n      }else{\n        console.log('提交失败')\n      }\n    })\n\n    //尝试获取表单的数据，先要确保对应的 field 已经用 getFieldDecorator 注册过了。\n   /* const values = this.props.form.getFieldsValue()\n    console.log(values);*/\n  }\n\n  validatorPwd = (rule,value,callback)=>{\n    if(!value){\n      callback('用户名必须输入')\n    }else if (value.length<4){\n      callback('用户名长度不能小于4位')\n    }else if (value.length>12){\n      callback('用户名长度不能超过12位')\n    }else if (!/^[A-z0-9_]+$/.test(value)){\n      callback('用户名必须以字母、数字或下划线组成')\n    }else{\n      callback()\n    }\n  }\n  render (){\n    //若是已经登录成功，那么就无法访问登录界面,需要跳转到管理界面\n    const {user} = this.props\n    if(user._id){\n      return <Redirect to='/home' />\n    }\n\n    return(\n        <div className=\"login-wrap\">\n          <div className=\"login-header\">\n            <img src={logo} alt=\"logo\"/>\n            <h1>React项目：后台管理系统</h1>\n          </div>\n          <div className=\"login-content\">\n            <div className={user.msg ? 'error-msg show' : 'error-msg'}>{user.msg}</div>\n            <h2>用户登录</h2>\n            <Form onSubmit={this.handleSubmit} className=\"login-form\">\n              <Form.Item>\n                {\n                  this.props.form.getFieldDecorator(\"username\", {\n                    rules:[\n                      //声名式校验\n                      {required:true,message:\"用户名必须输入\"},\n                      {max:12,message:\"用户名长度不能超过12位\"},\n                      {min:4,message:\"用户名长度不能小于4位\"},\n                      {pattern:/^[A-z0-9_]+$/,message:\"用户名必须以字母、数字或下划线组成\"}\n                    ],\n                    //设置初始值\n                    initialValue:'admin'\n                  })(\n                    <Input\n                      prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                      placeholder=\"用户名\"\n                      />\n                  )\n                }\n              </Form.Item>\n              <Form.Item>\n                {\n                  this.props.form.getFieldDecorator(\"password\", {\n                    rules:[\n                      //自定义校验\n                      {validator:this.validatorPwd}\n                    ]\n                  })(\n                    <Input\n                      prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                      type=\"password\"\n                      placeholder=\"密码\"\n                      />\n                  )\n                }\n\n              </Form.Item>\n              <Form.Item>\n                <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\n                  登录\n                </Button>\n              </Form.Item>\n            </Form>\n          </div>\n        </div>\n    )\n  }\n}\n\nconst WrapLogin = Form.create()(Login)\nexport default connect(\n  state => ({user:state.user}),\n  {login}\n)(WrapLogin)","/*包 含 n个 日 期 时 间 处 理 的 工 具 函 数 模 块*/\r\n\r\n/* 格 式 化 日 期 */\r\nexport function formateDate(time) {\r\n  if (!time) return ''\r\n  let date = new Date(time)\r\n  return date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate() + ' '\r\n    + date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds()\r\n}","const menuList = [\r\n  {\r\n    title: '首页', // 菜单标题名称\r\n    key: '/home', // 对应的path\r\n    icon: 'home', // 图标名称\r\n    isPublic: true // 公开的\r\n  },\r\n  {\r\n    title: '商品',\r\n    key: '/products',\r\n    icon: 'appstore',\r\n    children: [ // 子菜单列表\r\n      {\r\n        title: '品类管理',\r\n        key: '/category',\r\n        icon: 'bars'\r\n      },\r\n      {\r\n        title: '商品管理',\r\n        key: '/product',\r\n        icon: 'tool'\r\n      },\r\n    ]\r\n  },\r\n\r\n  {\r\n    title: '用户管理',\r\n    key: '/user',\r\n    icon: 'user'\r\n  },\r\n  {\r\n    title: '角色管理',\r\n    key: '/role',\r\n    icon: 'safety',\r\n  },\r\n\r\n  {\r\n    title: '图形图表',\r\n    key: '/charts',\r\n    icon: 'area-chart',\r\n    children: [\r\n      {\r\n        title: '柱形图',\r\n        key: '/charts/bar',\r\n        icon: 'bar-chart'\r\n      },\r\n      {\r\n        title: '折线图',\r\n        key: '/charts/line',\r\n        icon: 'line-chart'\r\n      },\r\n      {\r\n        title: '饼图',\r\n        key: '/charts/pie',\r\n        icon: 'pie-chart'\r\n      },\r\n    ]\r\n  },\r\n\r\n  {\r\n    title: '订单管理',\r\n    key: '/order',\r\n    icon: 'windows',\r\n  },\r\n]\r\n\r\nexport default menuList","import React from 'react'\r\n\r\nimport './index.less'\r\n\r\nexport default function LinkButton (props){\r\n\r\n  return <button {...props} className='link-button'></button>\r\n}","import React, {Component} from 'react'\r\nimport {withRouter} from 'react-router-dom'\r\nimport { Modal } from 'antd';\r\nimport {connect} from 'react-redux'\r\n\r\nimport './header.less'\r\nimport {reqWeather} from '../../api'\r\nimport {formateDate} from '../../utils/dateUtils.js'\r\nimport menuList from '../../config/menuConfig.js'\r\n//import storage from '../../utils/storageUtils.js'\r\nimport LinkButton from '../link-button'\r\nimport {logout} from '../../redux/actions.js'\r\n\r\nconst { confirm } = Modal;\r\n\r\nclass Header extends Component {\r\n\r\n  state = {\r\n    currentTime:'',\r\n    weather:'',\r\n    dayPictureUrl :''\r\n  }\r\n\r\n  getCurrentTime = ()=>{\r\n    this.intervalId = setInterval(()=>{\r\n      const currentTime =formateDate(Date.now())\r\n      this.setState({currentTime})\r\n    },1000)\r\n\r\n  }\r\n\r\n  getWeather = async(city)=>{\r\n    const {dayPictureUrl,weather} = await reqWeather(city)\r\n    this.setState({dayPictureUrl,weather})\r\n  }\r\n\r\n  /*这个用了redux之后就用不着了*/\r\n  /*getTitle = ()=>{\r\n    const path = this.props.location.pathname\r\n    menuList.forEach((item) =>{\r\n      if(item.key === path){\r\n        //debugger\r\n        this.title = item.title\r\n      }else if(item.children){\r\n          const cItem =item.children.find(cItem => path.indexOf(cItem.key)===0)\r\n          if (cItem){\r\n            this.title = cItem.title\r\n          }\r\n      }\r\n    })\r\n  }*/\r\n\r\n  logout = ()=>{\r\n      confirm({\r\n        title: '你确定要退出吗？',\r\n        okText: '确定',\r\n        cancelText: '取消',\r\n        //这里必须用箭头函数，因为里面的this需要是外部的this，而不是函数的this\r\n        onOk:() => {\r\n          /*用了redux就不用这个了*/\r\n          /*storage.removeUser()\r\n\r\n          this.props.history.replace('/login')*/\r\n          this.props.logout()\r\n\r\n        }\r\n      })\r\n\r\n  }\r\n\r\n\r\n  //异步操作，执行定时器，一般都在这--在render后执行，只执行一次\r\n  componentDidMount (){\r\n    this.getCurrentTime()\r\n    this.getWeather('北京')\r\n  }\r\n\r\n  //在要卸载时关闭定时器，防止内存泄露\r\n  componentWillUnmount (){\r\n    clearInterval(this.intervalId)\r\n  }\r\n\r\n  render (){\r\n    const {currentTime, weather, dayPictureUrl} = this.state\r\n    //用了redux就用不着this.getTitle()\r\n    return(\r\n      <div className='header' >\r\n        <div className=\"header-top\">\r\n          <span>欢迎：{this.props.user.username}</span>\r\n          <LinkButton onClick={this.logout} >退出</LinkButton>\r\n        </div>\r\n        <div className=\"header-bottom\">\r\n          <div className=\"header-bottom-left\">\r\n            <h1>{this.props.headerTitle}</h1>\r\n          </div>\r\n          <div className=\"header-bottom-right\">\r\n            <span>{currentTime}</span>\r\n            <img src={dayPictureUrl} alt=\"\"/>\r\n            <span>{weather}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  state => ({headerTitle:state.headerTitle,user:state.user}),\r\n  {logout}\r\n)(withRouter(Header))","import React, {Component} from 'react'\r\nimport {Link,withRouter} from 'react-router-dom'\r\nimport { Menu, Icon } from 'antd';\r\nimport {connect} from 'react-redux'\r\n\r\nimport './left-nav.less'\r\nimport logo from '../../assets/imgs/logo.png'\r\nimport menuList from '../../config/menuConfig.js'\r\nimport storageUtils from '../../utils/storageUtils.js'\r\nimport {setHeaderTitle} from '../../redux/actions.js'\r\n\r\nconst { SubMenu } = Menu;\r\n\r\nclass LeftNav extends Component {\r\n\r\n  setAuth = (item) => {\r\n    /*\r\n    * 1.admin\r\n    * 2.相应item的key值\r\n    * 3.首页，isPublic\r\n    *\r\n    * */\r\n    const {isPublic , key , children} = item\r\n    const {role , username} = this.props.user\r\n\r\n    if( isPublic || username==='admin' || role.menus.indexOf(key) !==-1 ){\r\n      return true\r\n    } else if(children){\r\n      return !!children.find(child => role.menus.indexOf(child.key) !== -1)\r\n    }\r\n    return false\r\n  }\r\n\r\n  //用map方法遍历写出结构，用了递归调用\r\n  /*getMenuNodes_map = (menuList)=>{\r\n    return menuList.map(item=>{\r\n      if(!item.children){\r\n        return(\r\n          <Menu.Item key={item.key} >\r\n            <Link to={item.key}>\r\n              <Icon type={item.icon} />\r\n              <span>{item.title}</span>\r\n            </Link>\r\n          </Menu.Item>\r\n        )\r\n      }else{\r\n        return (\r\n          <SubMenu\r\n            key={item.key}\r\n            title={\r\n              <span>\r\n                <Icon type={item.icon} />\r\n                <span>{item.title}</span>\r\n              </span>\r\n            }\r\n            >\r\n            {this.getMenuNodes_map(item.children)}\r\n          </SubMenu>\r\n        )\r\n      }\r\n    })\r\n  }*/\r\n\r\n  //用reduce方法将一个个结构加进去,用了递归调用\r\n  getMenuNodes_reduce = (menuList)=>{\r\n    return menuList.reduce((pretotal,item)=>{\r\n      const path = this.props.location.pathname\r\n      if(this.setAuth(item)){\r\n        if(!item.children){\r\n          if(path.indexOf(item.key)===0 ){\r\n            this.props.setHeaderTitle(item.title)\r\n          }\r\n          pretotal.push((\r\n            <Menu.Item key={item.key} >\r\n              <Link to={item.key} onClick={() => this.props.setHeaderTitle(item.title)} >\r\n                <Icon type={item.icon} />\r\n                <span>{item.title}</span>\r\n              </Link>\r\n            </Menu.Item>\r\n          ))\r\n        }else{\r\n          const cItem = item.children.find(cItem => path.indexOf(cItem.key)===0 )\r\n          if(cItem){\r\n            this.openKey = item.key\r\n          }\r\n          pretotal.push((\r\n            <SubMenu\r\n              key={item.key}\r\n              title={\r\n              <span>\r\n                <Icon type={item.icon} />\r\n                <span>{item.title}</span>\r\n              </span>\r\n            }\r\n              >\r\n              {this.getMenuNodes_reduce(item.children)}\r\n            </SubMenu>\r\n          ))\r\n        }\r\n      }\r\n\r\n      return pretotal\r\n    },[])\r\n  }\r\n\r\n  /*componentWillMount(){\r\n    //让他只执行一遍，在render中会重复执行多次\r\n    this.MenuNodes = this.getMenuNodes_reduce(menuList)\r\n  }*/\r\n  /*componentWillMount已经废弃，改用constructor*/\r\n  constructor(props){\r\n    //让他只执行一遍，在render中会重复执行多次\r\n    super(props)\r\n    this.MenuNodes = this.getMenuNodes_reduce(menuList)\r\n  }\r\n  render (){\r\n    let path = this.props.location.pathname\r\n    path = path.indexOf('/product')===0 ? '/product': path\r\n\r\n    const openKey = this.openKey\r\n    return(\r\n      <div className='left-nav' >\r\n\r\n        <Link to=\"/\" className=\"left-nav-header\">\r\n          <img src={logo} alt=\"logo\"/>\r\n          <h1>硅谷后台</h1>\r\n        </Link>\r\n\r\n        <Menu\r\n          mode=\"inline\"\r\n          theme=\"dark\"\r\n          selectedKeys={[path]}\r\n          defaultOpenKeys={[openKey]}\r\n          >\r\n          {\r\n            //this.getMenuNodes_map(menuList)\r\n            this.MenuNodes\r\n          }\r\n        </Menu>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  state => ({user:state.user}),\r\n  {setHeaderTitle}\r\n)(withRouter(LeftNav))","import React, {Component} from 'react'\r\nexport default class Home extends Component {\r\n  render (){\r\n    return(\r\n      <div>\r\n        <h2 style={{\r\n          fontSize:80,\r\n          fontWeight:\"bold\",\r\n          textAlign:\"center\",\r\n        }} >欢迎进入硅谷后台</h2>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport {Form , Select,Input} from 'antd'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst {Item} = Form\r\nconst {Option} =Select\r\n\r\nclass AddForm extends Component {\r\n  static propsTypes = {\r\n    categorys:PropTypes.array.isRequired,\r\n    parentId:PropTypes.string.isRequired,\r\n    setForm:PropTypes.func.isRequired\r\n  }\r\n\r\n  constructor (props){\r\n    super(props)\r\n    //给父级传递form对象\r\n    this.props.setForm(this.props.form)\r\n  }\r\n\r\n  render (){\r\n    const { getFieldDecorator } = this.props.form\r\n    const { parentId ,categorys } = this.props\r\n    return(\r\n      <Form>\r\n        <Item>\r\n        {\r\n          getFieldDecorator(\"parentId\",{\r\n            initialValue:parentId\r\n          })(\r\n\r\n              <Select>\r\n                <Option value=\"0\" >一级分类</Option>\r\n                {\r\n                  categorys.map(c => (\r\n                    <Option value={c._id} key={c._id} >{c.name}</Option>\r\n                  ))\r\n                }\r\n              </Select>\r\n          )\r\n        }\r\n        </Item>\r\n\r\n        <Item>\r\n          {\r\n            getFieldDecorator(\"categoryName\",{\r\n              rules:[\r\n                {required:true,message:\"分类名必须输入\"}\r\n              ]\r\n            })(\r\n              <Input placeholder=\"请输入分类名称\"></Input>\r\n            )\r\n          }\r\n        </Item>\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Form.create()(AddForm)","import React, {Component} from 'react'\r\nimport {Form  ,Input} from 'antd'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst {Item} = Form\r\n\r\nclass UpdateForm extends Component {\r\n\r\n  static propsTypes = {\r\n    categoryName:PropTypes.string.isRequired,\r\n    setForm:PropTypes.func.isRequired\r\n  }\r\n\r\n  constructor (props){\r\n    super(props)\r\n    //给父级传递form对象\r\n    this.props.setForm(this.props.form)\r\n  }\r\n\r\n  render (){\r\n    const { getFieldDecorator } = this.props.form\r\n    return(\r\n      <Form>\r\n      <Item>\r\n          {\r\n            getFieldDecorator(\"categoryName\",{\r\n              initialValue:this.props.categoryName,\r\n              rules:[\r\n                {required:true,message:\"分类名必须输入\"}\r\n              ]\r\n            })(\r\n              <Input placeholder=\"请输入分类名称\"></Input>\r\n            )\r\n          }\r\n        </Item>\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Form.create()(UpdateForm)","import React, {Component} from 'react'\r\nimport {Card,Icon,Button,Table,message,Modal} from 'antd'\r\n\r\nimport LinkButton from '../../components/link-button'\r\nimport {reqCategorys,reqAddCategory,reqUpdateCategory} from '../../api'\r\nimport AddForm from './add-form.js'\r\nimport UpdateForm from './update-form.js'\r\n\r\nexport default class Category extends Component {\r\n\r\n  state = {\r\n    loading:false,\r\n    category:\"\",\r\n    categorys : [],\r\n    secCategory:[],\r\n    parentId :\"0\",\r\n    parentName:\"\",\r\n    visible:0 //0不显示，1添加显示，2更新显示\r\n  }\r\n  //获取分类列表\r\n  getCategorts = async (parentId) => {\r\n    this.setState({loading:true})\r\n    const result = await reqCategorys(parentId)\r\n    this.setState({loading:false})\r\n    if(result.status === 0){\r\n      if(parentId === \"0\"){\r\n        this.setState({categorys:result.data})\r\n      }else{\r\n        this.setState({secCategory:result.data})\r\n      }\r\n\r\n    }else{\r\n      message.error('分类数据获取失败')\r\n    }\r\n  }\r\n  //获取二级分类列表\r\n  getSecCategorys = (category)=> {\r\n    //更新状态是异步的，所以通过第二个参数传回调函数，使得更新二级列表在更新状态后执行\r\n    this.setState({parentId:category._id,parentName:category.name},()=>{\r\n      this.getCategorts(this.state.parentId)\r\n    })\r\n\r\n  }\r\n  //获取一级分类列表\r\n  getFirCategory = ()=>{\r\n    this.setState({\r\n      secCategory:[],\r\n      parentId :\"0\",\r\n      parentName:\"\"\r\n    })\r\n  }\r\n  //初始化，在render前\r\n  constructor (props){\r\n    super(props)\r\n    this.columns = [\r\n      {\r\n        title: '分类名称',\r\n        dataIndex: 'name'\r\n        //key: '_id'\r\n      },\r\n      {\r\n        title:\"操作\",\r\n        //这个会传一个对象作为参数，在没有指定dataindex的情况下，该对象就是表示当前选中这一行的对象\r\n        render:(category) => (\r\n          <span>\r\n            <LinkButton onClick={()=>this.showUpdate(category)} >修改分类</LinkButton>\r\n            {category.parentId===\"0\" ?  <LinkButton onClick={() => this.getSecCategorys(category)} >查看子分类</LinkButton> : null }\r\n\r\n          </span>\r\n        ),\r\n        width:300\r\n      }\r\n\r\n    ]\r\n  }\r\n  //显示添加的对话框\r\n  showAdd = () => {\r\n    this.setState({visible:1})\r\n  }\r\n  //添加分类列表\r\n  addCategory =  () => {\r\n\r\n    //需要完成表单验证，才能添加\r\n    this.form.validateFields(async (error,values) => {\r\n      if(error){\r\n        return\r\n      }\r\n      this.setState({visible:0})\r\n\r\n      //因为这里的values取了form里的值，所以可以写成\r\n      const {categoryName} = values\r\n      const {parentId} = values\r\n      //清除存储的数据，不让这些数据保留下来显示在对话框中（需要在获取之后再清除）\r\n      this.form.resetFields()\r\n      const result = await reqAddCategory(categoryName,parentId)\r\n\r\n      if(result.status===0){\r\n        if(parentId === this.state.parentId){\r\n          this.getCategorts(this.state.parentId)\r\n        }else if (parentId === \"0\"){\r\n          this.getCategorts(\"0\")\r\n        }\r\n      }\r\n    })\r\n\r\n  }\r\n  //显示更新的对话框\r\n  showUpdate = (category) => {\r\n\r\n    this.setState({visible:2,category})\r\n  }\r\n  //更新分类列表\r\n  updateCategory =  () => {\r\n    this.form.validateFields( async (error,values) => {\r\n      if(error){\r\n        return\r\n      }\r\n      //1.关闭对话框\r\n      this.setState({visible:0})\r\n      //  2.发送请求\r\n      const categoryId = this.state.category._id\r\n      const categoryName = this.form.getFieldValue(\"categoryName\")\r\n      this.form.resetFields()\r\n      const result = await reqUpdateCategory({categoryName,categoryId})\r\n      //  3.更新列表\r\n      if(result.status === 0){\r\n        this.getCategorts(this.state.parentId)\r\n      }\r\n    })\r\n  }\r\n  //对话框取消\r\n  handleCancel = () => {\r\n    //清除存储的数据，不让这些数据保留下来显示在对话框中（需要在获取之后再清除）\r\n    this.form.resetFields()\r\n    this.setState({visible:0})\r\n  }\r\n  componentDidMount (){\r\n    this.getCategorts(this.state.parentId)\r\n  }\r\n\r\n  render (){\r\n    const {categorys,loading,parentId,secCategory,parentName,category} = this.state\r\n    return(\r\n      <div>\r\n        <Card\r\n          title={parentId===\"0\" ? \"一级商品分类\" : (\r\n            <span>\r\n              <LinkButton onClick={this.getFirCategory} >一级商品分类</LinkButton>\r\n              <Icon type='arrow-right' style={{marginRight:5}} />\r\n              <span>{parentName}</span>\r\n            </span>\r\n          )}\r\n          extra={\r\n            <Button type='primary' onClick={this.showAdd} >\r\n              <Icon type='plus'/>\r\n              <span >添加</span>\r\n            </Button>\r\n          }\r\n          >\r\n          <Table\r\n            dataSource={parentId===\"0\" ? categorys : secCategory}\r\n            columns={this.columns}\r\n            rowKey = '_id'\r\n            bordered\r\n            pagination = {{defaultPageSize:5,showQuickJumper:true}}\r\n            loading = {loading}\r\n            />\r\n\r\n          <Modal\r\n            title=\"添加分类\"\r\n            visible={this.state.visible===1}\r\n            onOk={this.addCategory}\r\n            onCancel={this.handleCancel}\r\n            >\r\n            <AddForm categorys={categorys} parentId={parentId} setForm={form => this.form = form}/>\r\n          </Modal>\r\n\r\n          <Modal\r\n            title=\"更新分类\"\r\n            visible={this.state.visible===2}\r\n            onOk={this.updateCategory}\r\n            onCancel={this.handleCancel}\r\n            >\r\n            <UpdateForm categoryName={category.name} setForm={form => this.form = form} />\r\n          </Modal>\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport {Card , Select , Input , Button , Icon , Table , message} from 'antd'\r\n\r\nimport LinkButton from '../../components/link-button'\r\nimport {reqProducts,reqSearchProducts,reqUpdateStatus} from '../../api/index.js'\r\nimport {PAGE_SIZE} from '../../utils/constants.js'\r\n\r\nconst {Option} = Select\r\n\r\nexport default class Home extends Component {\r\n\r\n  state = {\r\n    products:[],\r\n    total: 0 ,\r\n    searchKey:'',\r\n    searchType:'productName',\r\n    pageNum:0\r\n  }\r\n\r\n  getProducts = async(pageNum)=>{\r\n    //const pageNum = 1;\r\n    this.setState({pageNum})\r\n    const pageSize = PAGE_SIZE ;\r\n    let result\r\n    const {searchKey,searchType} = this.state\r\n    if(searchKey){\r\n      result = await reqSearchProducts({pageNum,pageSize,searchKey,searchType})\r\n    }else{\r\n      result = await reqProducts(pageNum,pageSize)\r\n    }\r\n    if(result.status ===0 ){\r\n      const {list , total} = result.data\r\n      //因为暂时不知道怎么添加数据，所以假装数据\r\n      this.setState({\r\n        /*products:list,*/\r\n        products:list,\r\n        total\r\n      })\r\n    }\r\n  }\r\n\r\n  updateStatus = async (productId , status)=>{\r\n    const result = await reqUpdateStatus(productId , status)\r\n    if(result.status === 0){\r\n      message.success('更新成功')\r\n      this.getProducts(this.state.pageNum || 1)\r\n    }\r\n  }\r\n\r\n  addProduct = ()=>{\r\n   this.props.history.push('/product/addupdate')\r\n  }\r\n\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.columns = [\r\n      {\r\n        title:\"商品名称\",\r\n        dataIndex:\"name\"\r\n      },\r\n      {\r\n        title:\"商品描述\",\r\n        dataIndex:\"desc\"\r\n      },\r\n      {\r\n        title:\"价格\",\r\n        dataIndex:\"price\",\r\n        render:(price)=>(\"￥\" + price)\r\n      },\r\n      {\r\n        title:\"状态\",\r\n        width:80,\r\n        render:(product)=>{\r\n          let {_id , status} = product\r\n\r\n          const btnText = status===1 ? \"下架\" : \"上架\"\r\n          const statusText = status===1 ? \"在售\" : \"已售空\"\r\n\r\n          status = status===1 ? 2 : 1 //1：在售，2：售空\r\n          return (\r\n              <span>\r\n                <Button type='primary' onClick={() => this.updateStatus(_id , status)} >{btnText}</Button>\r\n                <span>{statusText}</span>\r\n              </span>\r\n          )\r\n        }\r\n      },\r\n      {\r\n        title:\"操作\",\r\n        width:80,\r\n        render:(product) => {\r\n          return (\r\n            <span >\r\n              {/*push可以传两个参数，第一个是跳转地址，第二个是传state给目标路由组件*/}\r\n              <LinkButton onClick={() => this.props.history.push('/product/detail' , product )} >详情</LinkButton>\r\n              <LinkButton onClick={() => this.props.history.push('/product/addupdate' , product )}>修改</LinkButton>\r\n            </span>\r\n          )\r\n        }\r\n      }\r\n    ]\r\n  }\r\n\r\n  componentDidMount(){\r\n    //发送异步请求\r\n    this.getProducts(this.state.pageNum || 1)\r\n  }\r\n\r\n  render (){\r\n    const {products , total ,searchKey} = this.state\r\n    const title = (\r\n      <span>\r\n        <Select\r\n          defaultValue='productName'\r\n          style={{width:120}}\r\n          onChange={value => this.setState({searchType:value})}\r\n          >\r\n          <Option value='productName'>按名称搜索</Option>\r\n          <Option value='productDesc'>按描述搜索</Option>\r\n        </Select>\r\n        <Input\r\n          placeholder='关键字'\r\n          style={{width:120,margin:\"0 10px\"}}\r\n          value={searchKey}\r\n          onChange={event => this.setState({searchKey:event.target.value})}\r\n          />\r\n        <Button type='primary' onClick={() => this.getProducts(1)} >搜索</Button>\r\n      </span>\r\n    )\r\n    const extra = (\r\n      <Button type='primary' onClick={this.addProduct} >\r\n        <Icon type='plus'/>\r\n        添加商品\r\n      </Button>\r\n    )\r\n\r\n\r\n    return(\r\n      <Card\r\n        title={title}\r\n        extra={extra}\r\n        >\r\n        <Table\r\n          dataSource={products}\r\n          columns={this.columns}\r\n          bordered\r\n          rowKey=\"_id\"\r\n          pagination={{//分页配置\r\n          current:this.state.pageNum,\r\n          defaultPageSize:PAGE_SIZE,\r\n          total:total,\r\n          showQuickJumper:true,\r\n          onChange:value =>{\r\n            console.log(value)\r\n            return  this.getProducts(value)\r\n          }\r\n          }}\r\n\r\n          />\r\n      </Card>\r\n    )\r\n  }\r\n}","\r\nexport const  PAGE_SIZE = 3\r\nexport const BASE_PIC_URL = 'http://localhost:5000/upload/'","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { Upload, Icon, Modal , message } from 'antd';\r\nimport {reqDeletePic} from '../../api/index.js'\r\nimport {BASE_PIC_URL} from '../../utils/constants.js'\r\n\r\nconst BASE = '/api'\r\n//base64\r\nfunction getBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}\r\n\r\nexport default class PicturesWall extends React.Component {\r\n\r\n  static propTypes = {\r\n    imgs: PropTypes.array\r\n  }\r\n\r\n  //用constructor来初始化状态，因为这里可以进行数据的处理，而state只是一个对象\r\n  constructor(props) {\r\n    super(props)\r\n    /*\r\n     在 constructor() 函数中不要调用 setState() 方法。\r\n     如果你的组件需要使用内部 state，请直接在构造函数中为 this.state 赋值初始 state：\r\n     */\r\n    const imgs = this.props.imgs || []\r\n    const fileList = imgs.map((img, index) => ({\r\n      uid: -index,\r\n      name: img,\r\n      status: 'done',\r\n      url: BASE_PIC_URL + img\r\n    }))\r\n    this.state = {\r\n      previewVisible: false,\r\n      previewImage: '',\r\n      fileList\r\n    }\r\n  }\r\n\r\n  //大图Modal（对话框）关闭时隐藏\r\n  handleCancel = () => this.setState({previewVisible: false});\r\n\r\n  //大图Modal（对话框）显示\r\n  handlePreview = async file => {\r\n    if (!file.url && !file.preview) {\r\n      file.preview = await getBase64(file.originFileObj);\r\n    }\r\n\r\n    this.setState({\r\n      previewImage: file.url || file.preview,\r\n      previewVisible: true\r\n    });\r\n  };\r\n\r\n  //图片状态发生变化的回调\r\n  /*file为当前操作的文件对象，filelist为当前的文件列表*/\r\n  handleChange = async ({ file ,fileList }) => {\r\n    console.log('handleChange', fileList, file);\r\n    if (file.status === \"done\") {\r\n      //重新指定file是因为file和fileList的最后一个数据虽然相同，但是并非指定同一个对象，并不相等\r\n       const file = fileList[fileList.length-1]\r\n       //对fileList中的系统内定的name和url重新设定\r\n       //const result = file.response\r\n       const {name , url} = file.response.data\r\n       file.name = name\r\n       file.url = url\r\n      /*const result = file.response\r\n      if (result.status === 0) {\r\n        message.success('上传成功了')\r\n        const {name, url} = result.data\r\n        file = fileList[fileList.length - 1]\r\n        file.name = name\r\n        file.url = url\r\n      } else {\r\n        message.error('上传失败了')\r\n      }*/\r\n    } else if (file.status === 'removed') {\r\n      const result = await reqDeletePic(file.name)\r\n      if (result.status === 0) {\r\n        message.success(\"删除图片成功\")\r\n      } else {\r\n        message.error('删除图片失败')\r\n      }\r\n    }\r\n\r\n    this.setState({fileList})\r\n  };\r\n\r\n  //定义一个方法获取当前图片，得到所有图片名字数组，传给父组件\r\n  getPictures = () => {\r\n    return this.state.fileList.map(file => file.name)\r\n  }\r\n\r\n  render() {\r\n    const { previewVisible, previewImage, fileList } = this.state;\r\n    const uploadButton = (\r\n      <div>\r\n        <Icon type=\"plus\"/>\r\n\r\n        <div>Upload</div>\r\n      </div>\r\n    );\r\n    return (\r\n      <div>\r\n        <Upload\r\n          accept=\"image/*\" //接受的文件类型\r\n          action={BASE +\"/manage/img/upload\"} //上传图片的地址\r\n          name='image' //发送给后台的参数名，默认是file，所以必须指定，不指定后台无法得到数据\r\n          listType=\"picture-card\"\r\n          fileList={fileList}\r\n          onPreview={this.handlePreview}\r\n          onChange={this.handleChange}\r\n          >\r\n          {fileList.length >= 4 ? null : uploadButton}\r\n        </Upload>\r\n        <Modal visible={previewVisible} footer={null} onCancel={this.handleCancel}>\r\n          <img alt=\"example\" style={{ width: '100%' }} src={previewImage}/>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { EditorState, convertToRaw , ContentState } from 'draft-js';\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport htmlToDraft from 'html-to-draftjs';\r\nimport PropTypes from 'prop-types'\r\n\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css'\r\n\r\nexport default class RichTextEditor extends Component {\r\n  static propTypes ={\r\n    detail:PropTypes.string\r\n  }\r\n\r\n  /*state = {\r\n    editorState: EditorState.createEmpty()\r\n  }*/\r\n\r\n  uploadImageCallBack = (file)=> {\r\n    return new Promise(\r\n      (resolve, reject) => {\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.open('POST', '/manage/img/upload');\r\n        //xhr.setRequestHeader('Authorization', 'Client-ID XXXXX');\r\n        const data = new FormData();\r\n        data.append('image', file);\r\n        xhr.send(data);\r\n        xhr.addEventListener('load', () => {\r\n          const response = JSON.parse(xhr.responseText);\r\n          resolve(response);\r\n          console.log(response)\r\n        });\r\n        xhr.addEventListener('error', () => {\r\n          const error = JSON.parse(xhr.responseText);\r\n          reject(error);\r\n        });\r\n      }\r\n    )\r\n  }\r\n\r\n  constructor (props){\r\n    super(props)\r\n    const html = this.props.detail\r\n    if(html){\r\n      const contentBlock = htmlToDraft(html);\r\n      if (contentBlock) {\r\n        const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\r\n        const editorState = EditorState.createWithContent(contentState);\r\n        this.state = {\r\n          editorState\r\n        }\r\n      }\r\n    } else {\r\n      this.state = {\r\n        editorState: EditorState.createEmpty()\r\n      }\r\n    }\r\n\r\n\r\n  }\r\n\r\n  getEditor = () => {\r\n    return draftToHtml(convertToRaw(this.state.editorState.getCurrentContent()))\r\n  }\r\n\r\n  onEditorStateChange: Function = (editorState) => {\r\n    this.setState({\r\n      editorState,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { editorState } = this.state;\r\n    return (\r\n      <div>\r\n        <Editor\r\n          editorState={editorState}\r\n          wrapperClassName=\"demo-wrapper\"\r\n          editorStyle={{border:\"1px solid black\",minHeight:200,padding:\"0 10px\"}}\r\n          onEditorStateChange={this.onEditorStateChange}\r\n          toolbar={{\r\n            image: { uploadCallback: this.uploadImageCallBack, alt: { present: true, mandatory: true } },\r\n          }}\r\n          />\r\n      </div>\r\n    );\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport {Card , Icon ,Form , Input ,  Button , Cascader , message } from 'antd'\r\n\r\nimport {reqCategorys , reqAddOrUpdateProduct} from '../../api/index.js'\r\nimport PicturesWall from './picture-wall.jsx'\r\nimport RichTextEditor from './rich-text-editor.jsx'\r\n\r\nconst { Item } = Form\r\nconst { TextArea } = Input\r\n\r\n\r\nclass AddUpdate extends Component {\r\n\r\n  state = {\r\n    options:[]\r\n  }\r\n\r\n  handleSubmit =  () =>{\r\n    this.props.form.validateFields ( async (error,values) =>{\r\n      //获取数据\r\n      if(!error){\r\n        const imgs = this.pw.current.getPictures()\r\n        const detail = this.editor.current.getEditor()\r\n        const {name , desc , price , categoryIds} = values\r\n        let pCategoryId , categoryId\r\n        if(categoryIds.length ===1){\r\n          pCategoryId=\"0\"\r\n          categoryId=categoryIds[0]\r\n        } else {\r\n          pCategoryId=categoryIds[0]\r\n          categoryId=categoryIds[1]\r\n        }\r\n        const product = {name ,desc , price , pCategoryId , categoryId ,imgs , detail}\r\n        if(this.isUpdate){\r\n          product._id = this.product._id\r\n        }\r\n\r\n        //发送ajax请求\r\n        const result = await reqAddOrUpdateProduct(product)\r\n        if(result.status === 0){\r\n          message.success((this.isUpdate ? '更新' : \"添加\") +\"商品成功\")\r\n          //成功要返回home\r\n          this.props.history.goBack()\r\n        } else {\r\n          message.error((this.isUpdate ? '更新' : \"添加\") +\"商品失败\")\r\n        }\r\n\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  validatorPrice = (rule , value ,callback) =>{\r\n    if(value*1 > 0){\r\n      callback()\r\n    } else {\r\n      callback('价格必须大于0')\r\n    }\r\n  }\r\n\r\n  getCategorys = async (parentId) =>{\r\n    const result = await reqCategorys(parentId)\r\n    if(result.status===0){\r\n      /*传来的是一级分类*/\r\n      if(parentId===\"0\"){\r\n        const firCategorys = result.data\r\n        const options = firCategorys.map(c => (\r\n          {\r\n            value: c._id,\r\n            label: c.name,\r\n            isLeaf: false\r\n          }\r\n        ))\r\n\r\n        const {pCategoryId , categoryId } = this.product\r\n        if(this.isUpdate && pCategoryId!==\"0\"){\r\n\r\n          const secCategorys = await this.getCategorys(pCategoryId)\r\n          const cOptions = secCategorys.map(c => ({\r\n            label: c.name,\r\n            value: c._id,\r\n            isLeaf:true\r\n          }))\r\n          const targetOption = options.find( option => option.value===pCategoryId)\r\n          targetOption.children = cOptions\r\n          console.log(this.state.options);\r\n          this.setState({options:[...this.state.options]})\r\n          console.log(this.state.options);\r\n\r\n        }\r\n\r\n        this.setState({options})\r\n      } else {\r\n        /*传来的是二级分类*/\r\n        return result.data\r\n      }\r\n    }\r\n  }\r\n\r\n  loadData = async selectedOptions => {\r\n    const targetOption = selectedOptions[0];\r\n    targetOption.loading = true;\r\n\r\n    /*获取二级列表*/\r\n    const secCategorys = await this.getCategorys(targetOption.value)\r\n    targetOption.loading = false;\r\n    if(secCategorys && secCategorys.length>0){\r\n      const cOptions = secCategorys.map(c => ({\r\n        label: c.name,\r\n        value: c._id,\r\n        isLeaf:true\r\n      }))\r\n      targetOption.children = cOptions\r\n    }else{\r\n      targetOption.isLeaf = true\r\n    }\r\n    this.setState({\r\n      options: [...this.state.options],\r\n    })\r\n  }\r\n\r\n\r\n\r\n  constructor (props){\r\n    super(props)\r\n    const product = this.props.location.state\r\n    this.product = product || {}\r\n    this.isUpdate = !!product\r\n\r\n    //得到子组件的方法\r\n    this.pw = React.createRef()\r\n    this.editor = React.createRef()\r\n\r\n  }\r\n\r\n  componentDidMount (){\r\n    this.getCategorys(\"0\")\r\n\r\n  }\r\n\r\n  render (){\r\n    const {product,isUpdate} = this\r\n    const {pCategoryId , categoryId , imgs , detail} = product\r\n    const categoryIds = []\r\n     if(pCategoryId === \"0\"){\r\n       categoryIds.push(categoryId)\r\n     } else {\r\n       categoryIds.push(pCategoryId)\r\n       categoryIds.push(categoryId)\r\n     }\r\n\r\n    const formItemLayout = {\r\n      labelCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 2 }\r\n      },\r\n      wrapperCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 9 }\r\n      }\r\n    }\r\n\r\n    const title = (\r\n      <span>\r\n        <Icon type='arrow-left' style={{color:\"#1DA57A\" , fontSize:20 , marginRight:5}} onClick={this.props.history.goBack}/>\r\n        {isUpdate ? \"修改商品\" : '添加商品' }\r\n      </span>\r\n    )\r\n\r\n    return(\r\n      <div>\r\n        <Card title={title} >\r\n          <Form {...formItemLayout} >\r\n            <Item label='商品名称'>\r\n              {\r\n                //这是高阶函数\r\n                this.props.form.getFieldDecorator('name',{\r\n                  initialValue:isUpdate ? product.name:'' ,\r\n                  rules:[\r\n                    {required:true , message:'名称必须输入'}\r\n                  ]\r\n                })(\r\n                  <Input placeholder=\"请输入商品名称\" />\r\n                )\r\n              }\r\n            </Item>\r\n            <Item label='商品描述'>\r\n              {\r\n                //这是高阶函数\r\n                this.props.form.getFieldDecorator('desc',{\r\n                  initialValue:isUpdate ? product.desc:'' ,\r\n                  rules:[\r\n                    {required:true , message:'描述必须输入'}\r\n                  ]\r\n                })(\r\n                  <TextArea placeholder=\"请输入商品描述\" autosize={{ minRows: 2, maxRows: 6 }} />\r\n                )\r\n              }\r\n            </Item>\r\n            <Item label='商品价格'>\r\n              {\r\n                //这是高阶函数\r\n                this.props.form.getFieldDecorator('price',{\r\n                  initialValue:isUpdate ? product.price:'' ,\r\n                  rules:[\r\n                    {required:true , message:'价格必须输入'},\r\n                    {validator:this.validatorPrice}\r\n                  ]\r\n                })(\r\n                  <Input type=\"number\" placeholder=\"请输入商品价格\" addonAfter=\"元\"/>\r\n                )\r\n              }\r\n            </Item>\r\n            <Item label='商品分类'>\r\n              {\r\n                //这是高阶函数\r\n                this.props.form.getFieldDecorator('categoryIds',{\r\n                  initialValue:categoryIds\r\n                })(\r\n                  <Cascader\r\n                    options={this.state.options}/*需要显示的列表数据*/\r\n                    loadData={this.loadData}/*当选择某个列表项，加载下一级列表的监听回调*/\r\n                    />\r\n                )\r\n              }\r\n            </Item>\r\n            <Item label='商品图片'>\r\n              <PicturesWall ref={this.pw} imgs={imgs} />\r\n            </Item>\r\n            <Item label='商品详情' wrapperCol={{sm:{span:20}}} >\r\n              <RichTextEditor ref={this.editor} detail={detail} />\r\n            </Item>\r\n            <Item >\r\n              <Button type='primary' onClick={this.handleSubmit} >提交</Button>\r\n            </Item>\r\n          </Form>\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n//要想进行表单验证，就要用Form的create的方法，将form传给组件\r\nexport default Form.create()(AddUpdate)","import React, {Component} from 'react'\r\nimport {Card ,Icon , List } from 'antd'\r\n\r\nimport {reqCategory} from '../../api/index.js'\r\nimport {BASE_PIC_URL} from '../../utils/constants.js'\r\n\r\nconst Item = List.Item\r\n\r\nexport default class Detail extends Component {\r\n\r\n  state = {\r\n    cName1:'',\r\n    cName2:''\r\n  }\r\n\r\n  async componentDidMount (){\r\n    const {pCategoryId,categoryId} = this.props.location.state\r\n    if(pCategoryId===\"0\"){\r\n      const result = await reqCategory(categoryId)\r\n      this.setState({cName1:result.data.name})\r\n    }else{\r\n      //多次发送\r\n      /*const result1 = await reqCategory(pCategoryId)\r\n      const result2 = await reqCategory(categoryId)\r\n      this.setState({cName1:result1.data.name , cName2:result2.data.name})*/\r\n      //一次性发送\r\n      const results = await Promise.all([reqCategory(pCategoryId),reqCategory(categoryId)])\r\n      this.setState({cName1:results[0].data.name , cName2:results[1].data.name})\r\n    }\r\n\r\n\r\n  }\r\n\r\n  render (){\r\n    const {cName1,cName2} = this.state\r\n    const title = (\r\n      <span>\r\n        <Icon type='arrow-left'\r\n              style={{fontSize:20 , marginRight:10,color:\"#1DA57A\"}}\r\n              onClick={() => this.props.history.goBack()}\r\n          />\r\n        商品详情\r\n      </span>\r\n    )\r\n\r\n    /*获取push传给这个组件的第二个参数state*/\r\n    const {name,desc,price,imgs,detail} = this.props.location.state\r\n\r\n    return(\r\n      <Card title={title} >\r\n        <List className='product-detail'>\r\n          <Item>\r\n            <span className=\"left\">商品名称：</span>\r\n            {name}\r\n          </Item>\r\n          <Item>\r\n            <span className=\"left\">商品描述：</span>\r\n            {desc}\r\n          </Item>\r\n          <Item>\r\n            <span className=\"left\">商品价格：</span>\r\n            {price}\r\n          </Item>\r\n          <Item>\r\n            <span className=\"left\">所属分类：</span>\r\n            <span>{cName1} {cName2 ? \"-->\" + cName2 :\"\"} </span>\r\n          </Item>\r\n          <Item>\r\n            <span className=\"left\">商品图片：</span>\r\n            {\r\n              imgs.map(img => (\r\n                <img src={BASE_PIC_URL + img} alt=\"img\" key={img}/>\r\n              ))\r\n            }\r\n          </Item>\r\n          <Item>\r\n            <span className=\"left\">商品详情：</span>\r\n            <span className=\"right\" dangerouslySetInnerHTML={{__html:detail}} ></span>\r\n          </Item>\r\n        </List>\r\n      </Card>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport {Switch,Route,Redirect} from 'react-router-dom'\r\n\r\nimport Home from './home.jsx'\r\nimport AddUpdate from './add-update.jsx'\r\nimport Detail from './detail.jsx'\r\nimport './product.less'\r\n\r\nexport default class Product extends Component {\r\n  render (){\r\n    return(\r\n      <div  >\r\n        <Switch>\r\n          /*写在前面，就要写exact，使其精准（完全）配备*/\r\n          <Route path='/product' component={Home} exact/>\r\n          <Route path='/product/addupdate' component={AddUpdate} />\r\n          <Route path='/product/detail' component={Detail} />\r\n          {/*写在后面，就可以不用exact就可以解决带有/product就只跳转home的问题*/}\r\n          /*<Route path='/product' component={Home} />*/\r\n          <Redirect to='/product'/>\r\n        </Switch>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport {Form ,Input} from 'antd'\r\nimport PropTypes from 'prop-types'\r\n\r\n\r\nconst {Item} = Form\r\n\r\nclass AddForm extends Component {\r\n  static propsTypes = {\r\n    setForm:PropTypes.func.isRequired\r\n  }\r\n\r\n  constructor (props){\r\n    super(props)\r\n    //给父级传递form对象\r\n    this.props.setForm(this.props.form)\r\n  }\r\n\r\n  render (){\r\n    const { getFieldDecorator } = this.props.form\r\n    return(\r\n      <Form>\r\n\r\n        <Item>\r\n          {\r\n            getFieldDecorator(\"roleName\",{\r\n              rules:[\r\n                {required:true,message:\"角色名必须输入\"}\r\n              ]\r\n            })(\r\n              <Input placeholder=\"请输入角色名称\"></Input>\r\n            )\r\n          }\r\n        </Item>\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Form.create()(AddForm)","import React, {PureComponent} from 'react'\r\nimport {Form ,Input,Tree} from 'antd'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport menuList from '../../config/menuConfig.js'\r\n\r\nconst {Item} = Form\r\nconst { TreeNode } = Tree\r\n\r\n/*使用PureComponent，可使父组件状态改变，但是改变的状态并没有影响子组件时，子组件不会render*/\r\n/*PureComponent利用的是shouldComponentUpdate，不用我们自己定义这个生命周期是否返回true，它会自己进行state和props的浅比较*/\r\nexport default class AuthForm extends PureComponent {\r\n\r\n  static propTypes = {\r\n    role:PropTypes.object.isRequired\r\n  }\r\n  constructor (props){\r\n    super(props)\r\n    this.treeNodes = this.getTreeNodes(menuList)\r\n    const {menus} = this.props.role\r\n    console.log(menus);\r\n    this.state = {checkedKeys:menus}\r\n  }\r\n\r\n  getTreeNodes = (menuList) =>{\r\n    return menuList.reduce((pretotal , item)=>{\r\n      pretotal.push (\r\n        <TreeNode title={item.title} key={item.key} >\r\n          {item.children ? this.getTreeNodes(item.children) : null}\r\n        </TreeNode>\r\n      )\r\n\r\n      return pretotal\r\n    },[])\r\n  }\r\n\r\n  onCheck = (checkedKeys, info) => {\r\n    //console.log('onCheck', checkedKeys, info);\r\n    this.setState({checkedKeys})\r\n  }\r\n\r\n  /*将子元素的数据通过方法传给父元素调用*/\r\n  getMenus = () => this.state.checkedKeys\r\n\r\n  /*该生命周期已经过时，之后懂了回来改*/\r\n /* UNSAFE_componentWillReceiveProps (nextProps){\r\n    /!*目的是每次重新获取相应角色的勾选状态，而不是缓存状态*!/\r\n    const menus = nextProps.role.menus\r\n    this.setState({checkedKeys:menus})\r\n    console.log('UNSAFE_componentWillReceiveProps' , nextProps);\r\n  }*/\r\n  /*替代过时的UNSAFE_componentWillReceiveProps*/\r\n  componentDidUpdate (prevProps){\r\n    if(this.props.role !== prevProps.role){\r\n      /*目的是每次重新获取相应角色的勾选状态，而不是缓存状态*/\r\n      const menus = this.props.role.menus\r\n      this.setState({checkedKeys:menus})\r\n      console.log('componentDidUpdate' , prevProps);\r\n    }\r\n\r\n  }\r\n  render (){\r\n    console.log('render');\r\n    const {role} = this.props\r\n    const {checkedKeys} = this.state\r\n    /*在这里写formItemLayout，引入的时候一定要三点运算符*/\r\n    const formItemLayout = {\r\n      labelCol: {\r\n         span: 4\r\n      },\r\n      wrapperCol: {\r\n         span: 15\r\n      }\r\n    }\r\n    return(\r\n      <div>\r\n        <Item label='角色名称' {...formItemLayout} >\r\n          <Input value={role.name} disabled />\r\n        </Item>\r\n        <Tree\r\n          defaultExpandAll\r\n          checkable\r\n          checkedKeys={checkedKeys}\r\n          onCheck={this.onCheck}\r\n          >\r\n          <TreeNode title=\"角色授权\" key=\"0-0\">\r\n            {this.treeNodes}\r\n          </TreeNode>\r\n        </Tree>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, {Component} from 'react'\r\nimport {Card ,Table , Button , message , Modal} from 'antd'\r\nimport {connect} from 'react-redux'\r\n\r\nimport {reqRoleList} from '../../api'\r\nimport {PAGE_SIZE} from '../../utils/constants.js'\r\nimport AddForm from './add-form.js'\r\nimport {reqAddRole , reqUpdateRole} from '../../api'\r\nimport AuthForm from './auth-form.js'\r\n//import storage from '../../utils/storageUtils.js'\r\nimport {formateDate} from '../../utils/dateUtils.js'\r\nimport {logout} from '../../redux/actions.js'\r\n\r\nclass Role extends Component {\r\n  state = {\r\n    roles:[],\r\n    role:{},\r\n    isShowAdd:false,\r\n    isShowAuth:false\r\n  }\r\n\r\n  initColumns = [\r\n    {\r\n      title: '角色名',\r\n      dataIndex: 'name'\r\n    },\r\n    {\r\n      title: '创建时间',\r\n      dataIndex: 'create_time',\r\n      render:(create_time) => formateDate(create_time)\r\n    },\r\n    {\r\n      title: '授权时间',\r\n      dataIndex: 'auth_time',\r\n      render:formateDate\r\n    },\r\n    {\r\n      title: '授权人',\r\n      dataIndex: 'auth_name'\r\n    },\r\n  ]\r\n\r\n  getRoleList = async ()=>{\r\n    const result = await reqRoleList()\r\n    if(result.status === 0){\r\n      this.setState({roles:result.data})\r\n    } else {\r\n      message.error('角色列表获取失败')\r\n    }\r\n  }\r\n\r\n  onRow = role => {\r\n    return {\r\n      onClick: event => {\r\n        console.log(role)\r\n        this.setState({role})\r\n      }\r\n    }\r\n  }\r\n\r\n  addRole = ()=> {\r\n    this.form.validateFields (async(error, values) =>{\r\n        if(error){\r\n          return\r\n        }\r\n        const {roleName} = values\r\n        this.form.resetFields()\r\n        const result = await reqAddRole(roleName)\r\n        if(result.status === 0){\r\n          this.setState({isShowAdd:false})\r\n          message.success('添加角色成功')\r\n        /*更新数据方法1*/\r\n          //this.getRoleList()\r\n        /*更新数据方法2*/\r\n          const role = result.data\r\n          this.setState(state =>({\r\n            roles:[...state.roles,role]\r\n          }))\r\n          /*更新数据方法3*/\r\n          /*const roles = [...this.state.roles]\r\n          roles.push(role)\r\n          this.setState({roles})*/\r\n\r\n        } else {\r\n          message.error('添加角色成功')\r\n        }\r\n      }\r\n    )\r\n\r\n\r\n  }\r\n\r\n  setRole = async () => {\r\n    const role = this.state.role\r\n    role.menus = this.menus.current.getMenus()\r\n    role.auth_time = Date.now()\r\n    //role.auth_name = storage.getUser().username\r\n    role.auth_name = this.props.user.username\r\n    /*这样是另一个role，加进去的menus、auth等都不会保存给当前选中的role，只有当再发送请求，重新获取role时才得到当前role*/\r\n    //const role = {menus , _id , auth_time , auth_name}\r\n    const result = await reqUpdateRole(role)\r\n    if(result.status === 0){\r\n      this.setState({isShowAuth:false})\r\n      //const role = result.date\r\n      /*this.setState(state => ({\r\n        roles:[...state.roles,role]\r\n      }))*/\r\n      this.setState({\r\n        roles:[...this.state.roles]\r\n      })\r\n      //this.getRoleList()\r\n\r\n      if(role._id === this.props.user.role_id ){\r\n        /*storage.removeUser()\r\n        this.props.history.replace('/login')*/\r\n        this.props.logout()\r\n        message.success('权限发生改变，请重新登录')\r\n      } else {\r\n        message.success('授权管理成功')\r\n      }\r\n\r\n\r\n    } else {\r\n      message.error('授权管理失败')\r\n    }\r\n\r\n  }\r\n\r\n  constructor (props) {\r\n    super(props)\r\n    this.columns = this.initColumns\r\n    this.menus = React.createRef()\r\n  }\r\n  componentDidMount (){\r\n    this.getRoleList()\r\n  }\r\n  render (){\r\n    const {roles , role} = this.state\r\n    const title = (\r\n      <span>\r\n        <Button type='primary' onClick={() =>this.setState({isShowAdd:true})} >创建角色</Button>&nbsp;&nbsp;\r\n        <Button type='primary' disabled={!role._id} onClick={() =>this.setState({isShowAuth:true , role})}>设置角色权限</Button>\r\n      </span>\r\n    )\r\n\r\n    return(\r\n      <div>\r\n        <Card title={title} >\r\n          <Table\r\n            rowKey=\"_id\"\r\n            dataSource={roles}\r\n            columns={this.columns}\r\n            pagination={{defaultPageSize:PAGE_SIZE , showQuickJumper:true}}\r\n            onRow={this.onRow}\r\n            rowSelection={{type:'radio' , selectedRowKeys:[role._id] , onSelect:(role) => this.setState({role}) } }\r\n            />\r\n\r\n          <Modal\r\n            title=\"添加角色\"\r\n            visible={this.state.isShowAdd}\r\n            onOk={this.addRole}\r\n            onCancel={()=>{this.setState({isShowAdd:false})}}\r\n            >\r\n            <AddForm setForm={ form => this.form = form} />\r\n          </Modal>\r\n\r\n          <Modal\r\n            title=\"设置角色权限\"\r\n            visible={this.state.isShowAuth}\r\n            onOk={this.setRole}\r\n            onCancel={()=>{this.setState({isShowAuth:false})}}\r\n            >\r\n            <AuthForm role={this.state.role} ref={this.menus} />\r\n          </Modal>\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect (\r\n  state => ({user:state.user}),\r\n  {logout}\r\n)(Role)","import React, {Component} from 'react'\r\nimport {Form ,Input,Select} from 'antd'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst {Option} = Select\r\nconst {Item} = Form\r\n\r\nclass UserForm extends Component {\r\n  static propsTypes = {\r\n    setForm:PropTypes.func.isRequired,\r\n    roles:PropTypes.array.isRequired,\r\n    user:PropTypes.object\r\n  }\r\n\r\n  constructor (props){\r\n    super(props)\r\n    //给父级传递form对象\r\n    this.props.setForm(this.props.form)\r\n  }\r\n\r\n  render (){\r\n    const { getFieldDecorator } = this.props.form\r\n    const {roles} =  this.props\r\n    const user = this.props.user || {}\r\n    const formItemLayout = {\r\n      labelCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 4 }\r\n      },\r\n      wrapperCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 18 }\r\n      }\r\n    }\r\n    return(\r\n      <Form {...formItemLayout} >\r\n        <Item label=\"用户名\" >\r\n          {\r\n            getFieldDecorator(\"username\",{\r\n              initialValue:user.username,\r\n              rules:[\r\n                {required:true,message:\"用户名必须输入\"},\r\n                {min:3,message:\"用户名不小于3位\"}\r\n              ]\r\n            })(\r\n              <Input placeholder=\"请输入用户名称\"></Input>\r\n            )\r\n          }\r\n        </Item>\r\n          {\r\n            user._id ? null : (\r\n              <Item label=\"密码\" >\r\n                {\r\n                  getFieldDecorator(\"password\",{\r\n                    initialValue:'',\r\n                    rules:[\r\n                  {required:true,message:\"密码必须输入\"},\r\n                  {min:5,message:\"密码不小于5位\"}\r\n                    ]\r\n                  })(\r\n                    <Input type=\"password\" placeholder=\"请输入密码\"></Input>\r\n                    )\r\n                }\r\n              </Item>\r\n            )\r\n          }\r\n        <Item label=\"电话\" >\r\n          {\r\n            getFieldDecorator(\"phone\",{\r\n              initialValue:user.phone,\r\n              rules:[\r\n                {pattern:/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/,message:\"请输入正确的手机号码\"}\r\n              ]\r\n            })(\r\n              <Input placeholder=\"请输入电话号码\"></Input>\r\n            )\r\n          }\r\n        </Item>\r\n        <Item label=\"邮箱\" >\r\n          {\r\n            getFieldDecorator(\"email\",{\r\n              initialValue:user.email,\r\n              rules:[\r\n                {pattern:/\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/,message:\"请输入正确的邮箱\"}\r\n              ]\r\n            })(\r\n              <Input placeholder=\"请输入邮箱\"></Input>\r\n            )\r\n          }\r\n        </Item>\r\n        <Item label=\"角色名称\" >\r\n          {\r\n            getFieldDecorator(\"role_id\",{\r\n              initialValue:user.role_id\r\n            })(\r\n              <Select placeholder='请选择角色' >\r\n                {\r\n                  roles.map(role => (<Option value={role._id} key={role._id} >{role.name}</Option>))\r\n                }\r\n\r\n              </Select>\r\n            )\r\n          }\r\n        </Item>\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Form.create()(UserForm)","import React, {Component} from 'react'\r\nimport {Card , Button , Modal , Table ,message} from 'antd'\r\n\r\nimport LinkButton from '../../components/link-button/index.js'\r\nimport {formateDate} from '../../utils/dateUtils.js'\r\nimport {reqUserList , reqAddOrUpdateUSer ,reqDeleteUser } from '../../api/index.js'\r\nimport {PAGE_SIZE} from '../../utils/constants.js'\r\nimport UserForm from './user-form.js'\r\n\r\nconst { confirm } = Modal;\r\n\r\nexport default class User extends Component {\r\n  state = {\r\n    visible:false,\r\n    users:[],\r\n    roles:[],\r\n    user:{}\r\n  }\r\n\r\n  initColumns = ()=>{\r\n    return [\r\n      {\r\n        title:\"用户名\",\r\n        dataIndex:'username'\r\n      },\r\n      {\r\n        title:\"电话\",\r\n        dataIndex:'phone'\r\n      },\r\n      {\r\n        title:\"邮箱\",\r\n        dataIndex:'email'\r\n      },\r\n      {\r\n        title:\"角色\",\r\n        dataIndex:'role_id',\r\n        render:(role_id) => this.rolesName[role_id]\r\n      },\r\n      {\r\n        title:\"创建时间\",\r\n        dataIndex:'create_time',\r\n        render:formateDate\r\n      },\r\n      {\r\n        title:\"操作\",\r\n        render:(user)=>(\r\n          <span>\r\n            <LinkButton onClick={() => {this.setState({user,visible:true})}} >修改</LinkButton>\r\n            <LinkButton onClick={() => this.deleteUser(user)} >删除</LinkButton>\r\n          </span>\r\n        )\r\n      }\r\n    ]\r\n  }\r\n\r\n  getUsers = async()=>{\r\n    const result = await reqUserList()\r\n    if(result.status === 0){\r\n      const {users,roles} = result.data\r\n      this.rolesName = this.getRolesName(roles)\r\n      this.setState({users,roles})\r\n    }\r\n  }\r\n\r\n  getRolesName = (roles) => {\r\n    return roles.reduce((preTotal , role) => {\r\n      preTotal[role._id] = role.name\r\n      return preTotal\r\n    },[])\r\n  }\r\n\r\n  showAdd = () => {\r\n    this.setState({visible:true , user:{}})\r\n  }\r\n\r\n  addOrUpdateUser = () => {\r\n    this.form.validateFields( async (error,values) => {\r\n      if(error){\r\n        return\r\n      }\r\n      const {_id} = this.state.user\r\n      values._id = _id\r\n      const result = await reqAddOrUpdateUSer(values)\r\n      this.form.resetFields()\r\n      if(result.status ===0){\r\n        this.getUsers()\r\n        this.setState({visible:false})\r\n        message.success((_id ? \"修改\" : \"添加\") + \"用户成功\")\r\n      } else {\r\n        message.error((_id ? \"修改\" : \"添加\") + \"用户失败\")\r\n      }\r\n    })\r\n  }\r\n\r\n  deleteUser =  (user) => {\r\n    console.log(user);\r\n    confirm({\r\n      title: `你确定要删除<${user.username}>吗？`,\r\n      okText: '确定',\r\n      okType: 'danger',\r\n      cancelText: '取消',\r\n      onOk:async () =>{\r\n        const result = await reqDeleteUser(user._id)\r\n        console.log(result);\r\n        if(result.status === 0){\r\n          this.getUsers()\r\n          message.success(\"删除用户成功\")\r\n        }else{\r\n          message.error(\"删除用户失败\")\r\n        }\r\n      }\r\n    })\r\n\r\n  }\r\n  constructor(props){\r\n    super(props)\r\n    this.columns = this.initColumns()\r\n    this.getUsers()\r\n  }\r\n\r\n  render (){\r\n    const {roles , users , visible ,user} = this.state\r\n    return(\r\n      <Card title={<Button type=\"primary\" onClick={this.showAdd} >创建用户</Button>} >\r\n        <Table\r\n          dataSource={users}\r\n          columns={this.columns}\r\n          rowKey = '_id'\r\n          bordered\r\n          pagination = {{defaultPageSize:PAGE_SIZE,showQuickJumper:true}}\r\n          />\r\n\r\n        <Modal\r\n          title={(user._id ? '修改' : \"添加\") + \"用户\" }\r\n          visible={visible}\r\n          onOk={this.addOrUpdateUser}\r\n          onCancel={() =>{\r\n            this.form.resetFields()\r\n            this.setState({visible:false})\r\n          }}\r\n          >\r\n          <UserForm setForm={form => this.form = form} roles={roles} user={user} />\r\n        </Modal>\r\n\r\n      </Card>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport {Card , Button} from 'antd'\r\nimport ReactEcharts from 'echarts-for-react'\r\n\r\nexport default class Bar extends Component {\r\n  state = {\r\n    sales:[5, 20, 36, 10, 10, 20],\r\n    stores:[7, 50, 53, 20, 9, 20]\r\n  }\r\n  update = ()=>{\r\n    this.setState(state => ({\r\n      sales:state.sales.map(item => item + 1),\r\n      stores:state.stores.map(item => item - 1)\r\n    }))\r\n  }\r\n\r\n  setOption = ()=>{\r\n    return  {\r\n      title: {\r\n        text: 'ECharts 入门示例'\r\n      },\r\n      tooltip: {},\r\n      legend: {\r\n        data:['销量','库存']\r\n      },\r\n      xAxis: {\r\n        data: [\"衬衫\",\"羊毛衫\",\"雪纺衫\",\"裤子\",\"高跟鞋\",\"袜子\"]\r\n      },\r\n      yAxis: {},\r\n      series: [{\r\n        name: '销量',\r\n        type: 'bar',\r\n        data: this.state.sales\r\n      },\r\n        {\r\n          name: '库存',\r\n          type: 'bar',\r\n          data: this.state.stores\r\n        }\r\n      ]\r\n    }\r\n  }\r\n\r\n  render (){\r\n    return(\r\n      <div>\r\n        <Card title='柱状图'>\r\n          <Button type='primary' onClick={this.update} >更新</Button>\r\n        </Card>\r\n        <Card title='柱状图'>\r\n          <ReactEcharts option={this.setOption()} />\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport {Card , Button} from 'antd'\r\nimport ReactEcharts from 'echarts-for-react'\r\n\r\nexport default class Line extends Component {\r\n  state = {\r\n    sales:[5, 20, 36, 10, 10, 20],\r\n    stores:[7, 50, 53, 20, 9, 20]\r\n  }\r\n  update = ()=>{\r\n    this.setState(state => ({\r\n      sales:state.sales.map(item => item + 1),\r\n      stores:state.stores.map(item => item - 1)\r\n    }))\r\n  }\r\n\r\n  setOption = ()=>{\r\n    return  {\r\n      title: {\r\n        text: 'ECharts 入门示例'\r\n      },\r\n      tooltip: {},\r\n      legend: {\r\n        data:['销量','库存']\r\n      },\r\n      xAxis: {\r\n        data: [\"衬衫\",\"羊毛衫\",\"雪纺衫\",\"裤子\",\"高跟鞋\",\"袜子\"]\r\n      },\r\n      yAxis: {},\r\n      series: [{\r\n        name: '销量',\r\n        type: 'line',\r\n        data: this.state.sales\r\n      },\r\n        {\r\n          name: '库存',\r\n          type: 'line',\r\n          data: this.state.stores\r\n        }\r\n      ]\r\n    }\r\n  }\r\n\r\n  render (){\r\n    return(\r\n      <div>\r\n        <Card title='柱状图'>\r\n          <Button type='primary' onClick={this.update} >更新</Button>\r\n        </Card>\r\n        <Card title='柱状图'>\r\n          <ReactEcharts option={this.setOption()} />\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport {Card , Button} from 'antd'\r\nimport ReactEcharts from 'echarts-for-react'\r\n\r\nexport default class Pie extends Component {\r\n  /*state = {\r\n    sales:[5, 20, 36, 10, 10, 20],\r\n    stores:[7, 50, 53, 20, 9, 20]\r\n  }\r\n  update = ()=>{\r\n    this.setState(state => ({\r\n      sales:state.sales.map(item => item + 1),\r\n      stores:state.stores.map(item => item - 1)\r\n    }))\r\n  }*/\r\n\r\n  setOption = ()=> {\r\n    return {\r\n      backgroundColor: '#2c343c',\r\n\r\n      title: {\r\n        text: 'Customized Pie',\r\n        left: 'center',\r\n        top: 20,\r\n        textStyle: {\r\n          color: '#ccc'\r\n        }\r\n      },\r\n\r\n      tooltip: {\r\n        trigger: 'item',\r\n        formatter: '{a} <br/>{b} : {c} ({d}%)'\r\n      },\r\n\r\n      visualMap: {\r\n        show: false,\r\n        min: 80,\r\n        max: 600,\r\n        inRange: {\r\n          colorLightness: [0, 1]\r\n        }\r\n      },\r\n      series: [\r\n        {\r\n          name: '访问来源',\r\n          type: 'pie',\r\n          radius: '55%',\r\n          center: ['50%', '50%'],\r\n          data: [\r\n            {value: 335, name: '直接访问'},\r\n            {value: 310, name: '邮件营销'},\r\n            {value: 274, name: '联盟广告'},\r\n            {value: 235, name: '视频广告'},\r\n            {value: 400, name: '搜索引擎'}\r\n          ].sort(function (a, b) {\r\n              return a.value - b.value;\r\n            }),\r\n          roseType: 'radius',\r\n          label: {\r\n            color: 'rgba(255, 255, 255, 0.3)'\r\n          },\r\n          labelLine: {\r\n            lineStyle: {\r\n              color: 'rgba(255, 255, 255, 0.3)'\r\n            },\r\n            smooth: 0.2,\r\n            length: 10,\r\n            length2: 20\r\n          },\r\n          itemStyle: {\r\n            color: '#c23531',\r\n            shadowBlur: 200,\r\n            shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n          },\r\n\r\n          animationType: 'scale',\r\n          animationEasing: 'elasticOut',\r\n          animationDelay: function (idx) {\r\n            return Math.random() * 200;\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n\r\n  render (){\r\n    return(\r\n      <div>\r\n        <Card title='柱状图'>\r\n          <Button type='primary' onClick={this.update} >更新</Button>\r\n        </Card>\r\n        <Card title='柱状图'>\r\n          <ReactEcharts option={this.setOption()} />\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport {Button, Row, Col} from 'antd'\r\nimport {connect} from 'react-redux'\r\nimport {setHeaderTitle} from '../../redux/actions'\r\n\r\nimport './not-found.less'\r\n/* 前 台 404页 面*/\r\nclass NotFound extends Component {\r\n  goHome = () => {\r\n    this.props.setHeaderTitle('首页')\r\n    this.props.history.replace('/home')\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Row className='not-found'>\r\n        <Col span={12} className='left'></Col> <Col span={12} className='right'><h1>404</h1>\r\n\r\n          <h2>抱歉，你访问的页面不存在</h2>\r\n\r\n          <div>\r\n            <Button type='primary' onClick={this.goHome}> 回到首页 </Button>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    )\r\n  }\r\n}\r\nexport default connect(\r\n  null,\r\n  {setHeaderTitle}\r\n)(NotFound)\r\n","import React, {Component} from 'react'\r\nimport {Redirect,Switch,Route} from 'react-router-dom'\r\nimport { Layout } from 'antd';\r\nimport {connect} from 'react-redux'\r\n\r\nimport storage from '../../utils/storageUtils.js'\r\nimport Header from '../../components/header/header.jsx'\r\nimport LeftNav from '../../components/left-nav/left-nav.jsx'\r\n\r\nimport Home from '../home/home'\r\nimport Category from '../category/category'\r\nimport Product from '../product/product'\r\nimport Role from '../role/role'\r\nimport User from '../user/user'\r\nimport Bar from '../charts/bar'\r\nimport Line from '../charts/line'\r\nimport Pie from '../charts/pie'\r\nimport NotFound from '../not-found/not-found.jsx'\r\n\r\nconst {Footer, Sider, Content } = Layout;\r\n\r\nclass Main extends Component {\r\n  render() {\r\n    let user = this.props.user\r\n\r\n    if (!user._id) {\r\n      console.log(!!user._id)\r\n      return <Redirect to='/login'/>\r\n    }\r\n    return (\r\n      <Layout style={{minHeight:'100%'}}>\r\n        <Sider>\r\n          <LeftNav/>\r\n        </Sider>\r\n        <Layout>\r\n          <Header>Header</Header>\r\n          <Content style={{backgroundColor:\"white\",margin:20}}>\r\n            <Switch>\r\n              <Redirect exact from='/'  to='/home'/>\r\n              <Route path='/home' component={Home}/>\r\n              <Route path='/category' component={Category}/>\r\n              <Route path='/product' component={Product}/>\r\n              <Route path='/role' component={Role}/>\r\n              <Route path='/user'component={User}/>\r\n              <Route path='/charts/bar' component={Bar}/>\r\n              <Route path='/charts/line' component={Line}/>\r\n              <Route path='/charts/pie' component={Pie}/>\r\n              <Route  component={NotFound}/>\r\n            </Switch>\r\n\r\n          </Content>\r\n          <Footer style={{textAlign:\"center\",color:\"grey\"}}>推荐使用谷歌浏览器，可以获得更加的页面显示操作效果</Footer>\r\n        </Layout>\r\n      </Layout>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  state => ({user:state.user}),\r\n  {}\r\n)(Main)","import React, {Component} from 'react'\nimport {BrowserRouter,Switch,Route} from 'react-router-dom'\n\nimport Login from \"./pages/login/login.jsx\"\nimport Main from './pages/main/main.jsx'\n\nexport default class App extends Component {\n  render (){\n    return(\n        <BrowserRouter>\n          <Switch>\n            <Route path='/login' component={Login} />\n            <Route path='/' component={Main} />\n          </Switch>\n        </BrowserRouter>\n    )\n  }\n}","import {combineReducers} from 'redux'\r\nimport storage from '../utils/storageUtils.js'\r\n\r\nimport {SET_HEADER_TITLE , RECEIVE_USER , SEND_ERROR_MSG , RESET_USER} from './action-types.js'\r\n\r\nconst initHeaderTitle = '首页'\r\nfunction headerTitle (state=initHeaderTitle , action){\r\n  switch (action.type){\r\n    case SET_HEADER_TITLE:\r\n      return action.data\r\n    default : return state\r\n  }\r\n}\r\n\r\n/*初始值一定不能是空对象，否则每次渲染都是空对象，保存的user就没有了，应该是已经登录的user*/\r\nconst inituser = storage.getUser()\r\nfunction user (state=inituser , action){\r\n  switch (action.type){\r\n    case RECEIVE_USER :\r\n      //const user = action.user\r\n      return action.user\r\n    case SEND_ERROR_MSG:\r\n      const msg = action.msg\r\n      /*不推荐这么写，因为不能改变原有的state*/\r\n      /*state.msg = msg\r\n      return state*/\r\n      /*推荐这么写*/\r\n      return {...state,msg}\r\n    case RESET_USER :\r\n      return {}\r\n    default : return state\r\n  }\r\n}\r\n\r\nexport default combineReducers({\r\n  headerTitle,\r\n  user\r\n})\r\n","import {createStore ,  applyMiddleware} from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport {composeWithDevTools} from 'redux-devtools-extension'\r\n\r\nimport reducer from './reducer.js'\r\n\r\nexport default createStore(reducer ,  composeWithDevTools(applyMiddleware(thunk)))","import React from 'react'\nimport {render} from 'react-dom'\nimport {Provider} from 'react-redux'\n\nimport App from './app'\n//import 'antd/dist/antd.css'\nimport store from './redux/store.js'\n\nrender(\n  <Provider store={store} >\n    <App/>\n  </Provider>\n  ,document.getElementById('root')\n)","module.exports = __webpack_public_path__ + \"static/media/logo.ba1f87ec.png\";"],"sourceRoot":""}